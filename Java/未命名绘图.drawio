<mxfile host="app.diagrams.net" modified="2020-11-24T09:38:14.657Z" agent="5.0 (Windows)" etag="vQrAKHqkh2O8AREB9oet" version="13.10.1" type="github">
  <diagram id="lWI4Yrw9_XgJYYFOmo5q" name="第 1 页">
    <mxGraphModel dx="786" dy="692" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="txyQpk4Wq3mBFP4diiCH-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="sZy4BEvlhW2PZ91gEMgt-1" target="sZy4BEvlhW2PZ91gEMgt-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sZy4BEvlhW2PZ91gEMgt-1" value="设备登录" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="40" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="sZy4BEvlhW2PZ91gEMgt-2" target="txyQpk4Wq3mBFP4diiCH-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sZy4BEvlhW2PZ91gEMgt-2" value="连接桶：校验设备id、密码，获取token" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="txyQpk4Wq3mBFP4diiCH-1" target="txyQpk4Wq3mBFP4diiCH-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-1" value="连接桶：获取连接可用信息，并使用可用信息获取连接" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="190" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="txyQpk4Wq3mBFP4diiCH-2" target="txyQpk4Wq3mBFP4diiCH-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-2" value="设备连接mq，向mq发送消息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="160" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="txyQpk4Wq3mBFP4diiCH-10" target="txyQpk4Wq3mBFP4diiCH-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-10" value="网关机：接收订阅的mq消息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="txyQpk4Wq3mBFP4diiCH-11" target="txyQpk4Wq3mBFP4diiCH-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-11" value="前面代理获取接收到的mq消息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jMSpXemgAXXJ-GPNqNwV-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="txyQpk4Wq3mBFP4diiCH-12" target="txyQpk4Wq3mBFP4diiCH-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-12" value="解析消息，并通过多线程处理任务" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jMSpXemgAXXJ-GPNqNwV-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="txyQpk4Wq3mBFP4diiCH-17" target="txyQpk4Wq3mBFP4diiCH-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-17" value="调用过滤器&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="360" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jMSpXemgAXXJ-GPNqNwV-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="txyQpk4Wq3mBFP4diiCH-18" target="txyQpk4Wq3mBFP4diiCH-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-18" value="过滤器：限流、鉴权、然后根据不同的策略调用不同的处理器" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="560" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jMSpXemgAXXJ-GPNqNwV-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="txyQpk4Wq3mBFP4diiCH-19" target="txyQpk4Wq3mBFP4diiCH-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-19" value="设备服务：登录处理器调用设备服务暴露的登录接口执行登录逻辑" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="560" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="txyQpk4Wq3mBFP4diiCH-20" value="设备服务登录操作结果返回网关机，经过过滤器的包装，调用mqtt返回给设备" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="560" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jMSpXemgAXXJ-GPNqNwV-6" value="设备发送消息" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="440" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jMSpXemgAXXJ-GPNqNwV-7" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="640" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
